<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EY & ServiceNow Alliance Map</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f4f6f9;
            height: 100vh;
            overflow: hidden;
        }
        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        .logo-container {
            position: absolute;
            top: 20px;
            z-index: 1000;
            background: white;
            padding: 12px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }
        .logo-left {
            left: 20px;
        }
        .logo-right {
            right: 20px;
        }
        .logo-container img {
            height: 48px;
            width: auto;
            border-radius: 4px;
        }
        #map {
            width: 100%;
            height: 100%;
        }
        .hover-card {
            position: absolute;
            background: white;
            border-radius: 16px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
            padding: 0;
            z-index: 1001;
            display: none;
            min-width: 600px;
            max-width: 800px;
            font-size: 18px;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
            transform: scale(0.95);
            opacity: 0;
        }
        .hover-card.visible {
            transform: scale(1);
            opacity: 1;
        }
        .card-content {
            display: flex;
            height: 100%;
        }
        .card-section {
            flex: 1;
            padding: 25px;
            position: relative;
        }
        .servicenow-section {
            background: linear-gradient(135deg, #e8f5e8 0%, #d4f1d4 100%);
            border-radius: 10px 0 0 10px;
            border-right: 2px solid #c0c0c0;
        }
        .ey-section {
            background: linear-gradient(135deg, #fff9e6 0%, #ffeaa7 100%);
            border-radius: 0 10px 10px 0;
        }
        .section-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
            text-align: center;
        }
        .leader-info {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .leader-photo {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            margin-right: 20px;
            object-fit: cover;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .leader-details h4 {
            margin: 0 0 8px 0;
            font-size: 20px;
            color: #333;
        }
        .leader-details p {
            margin: 0;
            font-size: 16px;
            color: #666;
        }
        .region-name {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 25px;
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .global-leaders {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e7eb;
            z-index: 1000;
            max-width: 450px;
        }
        .global-leaders h3 {
            margin: 0 0 20px 0;
            font-size: 20px;
            color: #2c3e50;
            text-align: center;
        }
        .global-leader-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(248, 249, 250, 0.8);
        }
        .global-leader-photo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            object-fit: cover;
            border: 2px solid white;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }
        .global-leader-info h5 {
            margin: 0 0 5px 0;
            font-size: 16px;
            color: #333;
        }
        .global-leader-info p {
            margin: 0;
            font-size: 14px;
            color: #666;
        }
        .company-divider {
            margin: 20px 0;
            border-top: 2px solid #e0e0e0;
            padding-top: 20px;
        }
        .regional-legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e7eb;
            z-index: 1000;
            max-width: 250px;
        }
        .regional-legend h4 {
            margin: 0 0 15px 0;
            font-size: 16px;
            color: #2c3e50;
            text-align: center;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        .region-title-small {
            font-size: 16px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 6px;
            text-align: center;
        }
        .leader-info-inline {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .leader-photo-small {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }
        .leader-text {
            color: #2c3e50;
            font-weight: 500;
            line-height: 1.3;
        }
        .legend-divider {
            margin: 15px 0;
            border-top: 2px solid #e0e0e0;
        }
        .company-header {
            margin: 15px 0 10px 0;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            padding: 8px;
            border-radius: 6px;
        }
        .servicenow-header {
            background-color: #62D84E;
            color: white;
        }
        .ey-header {
            background-color: #FFE600;
            color: #1C1F21;
        }
        
        .button-container {
            position: absolute;
            top: 20px;
            left: 180px;
            z-index: 1000;
            display: flex;
            gap: 12px;
        }
        
        .ey-button {
            height: 48px;
            padding: 8px 20px;
            background: #62D84E;
            border-radius: 24px;
            box-shadow: 0 2px 8px rgba(98, 216, 78, 0.3);
            text-decoration: none;
            color: white;
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border: none;
            min-width: 100px;
            text-align: center;
            line-height: 1.2;
        }
        
        .ey-button:hover {
            background: #4BC239;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(98, 216, 78, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo-container logo-left">
            <img src="images/EYLogo.png" alt="EY Logo">
        </div>
        <div class="button-container">
            <a href="nowtalks.html" class="ey-button">Now Talks</a>
            <a href="#" class="ey-button">Solutions &<br>Offerings</a>
            <a href="contact.html" class="ey-button">Contact Info</a>
        </div>
        <div class="logo-container logo-right">
            <img src="images/ServiceNowLogo.png" alt="ServiceNow Logo">
        </div>
        <div id="map"></div>
        <div id="hoverCard" class="hover-card">
            <div class="region-name" id="regionName"></div>
            <div class="card-content">
                <div class="card-section servicenow-section">
                    <div class="section-title">ServiceNow</div>
                    <div id="servicenowContent"></div>
                </div>
                <div class="card-section ey-section">
                    <div class="section-title">EY</div>
                    <div id="eyContent"></div>
                </div>
            </div>
        </div>
        <div class="regional-legend">
            <h4>EY Super Regions</h4>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #80B1D3;"></div>
                <span>US + LATAM + Israel</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #B3DE69;"></div>
                <span>Canada</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #FB8072;"></div>
                <span>Europe West</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #FDB462;"></div>
                <span>UKI</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #FCCDE5;"></div>
                <span>Nordics + CESA</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #BC80BD;"></div>
                <span>India + Africa</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #CCEBC5;"></div>
                <span>Oceania</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #FFED6F;"></div>
                <span>MENA</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #8DD3C7;"></div>
                <span>Greater China</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #BEBADA;"></div>
                <span>Japan + ASEAN + Korea</span>
            </div>
            
            <div class="legend-divider"></div>
            
            <h4>ServiceNow Regions</h4>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #66C2A5;"></div>
                <span>North America</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #FC8D62;"></div>
                <span>EMEA</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #8DA0CB;"></div>
                <span>APJ + LATAM</span>
            </div>
        </div>
        <div class="global-leaders">
            <h3>Global Alliance Leaders</h3>
            
            <h4 class="company-header servicenow-header">ServiceNow</h4>
            <div class="global-leader-item">
                <img src="images/MarkBagley.jpg" alt="Mark Bagley" class="global-leader-photo">
                <div class="global-leader-info">
                    <h5>Mark Bagley</h5>
                    <p>Global Partner Leader</p>
                </div>
            </div>
            
            <div class="global-leader-item">
                <img src="images/ChristieRice.jpg" alt="Christie Rice" class="global-leader-photo">
                <div class="global-leader-info">
                    <h5>Christie Rice</h5>
                    <p>Global Partner Manager</p>
                </div>
            </div>
            
            <div class="global-leader-item">
                <img src="images/JonOBeirne.png" alt="Jon O'Beirne" class="global-leader-photo">
                <div class="global-leader-info">
                    <h5>Jon O'Beirne</h5>
                    <p>Partner Technology Strategist</p>
                </div>
            </div>
            <div class="company-divider"></div>
            
            <h4 class="company-header ey-header">EY</h4>
            <div class="global-leader-item">
                <img src="images/AnindoDutta.jpg" alt="Anindo Dutta" class="global-leader-photo">
                <div class="global-leader-info">
                    <h5>Anindo Dutta</h5>
                    <p>Global Alliance Leader</p>
                </div>
            </div>
            
            <div class="global-leader-item">
                <img src="images/JohnJostes.jpg" alt="John Jostes" class="global-leader-photo">
                <div class="global-leader-info">
                    <h5>John Jostes</h5>
                    <p>Global Alliance Director</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        // ServiceNow Regional Leaders
        const servicenowLeaders = {
            'North America': [
                       { name: 'Mark Bagley', title: 'Global Partner Leader', photo: 'images/MarkBagley.jpg' },
                { name: 'Christie Rice', title: 'Global Partner Manager', photo: 'images/ChristieRice.jpg' },
                { name: 'Jon O\'Beirne', title: 'Partner Technology Strategist', photo: 'images/JonOBeirne.png' },
                { name: 'Kevin Dineen', title: 'Partner Manager (MFG, HCLS, Retail)', photo: 'images/KevinDineen.png' },
                { name: 'Mark Folit', title: 'Partner Manager (FSO, TMT)', photo: 'images/MarkFolit.jpg' },
                { name: 'Tim Holmes', title: 'Partner Manager (GPS)', photo: 'images/MarkBagley.jpg' },
                { name: 'Sam Siam', title: 'Global Partner Seller (Built On)', photo: 'images/SamSiam.jpg' }
            ],
            'EMEA': [
                    { name: 'Mark Bagley', title: 'Global Partner Leader', photo: 'images/MarkBagley.jpg' },
                { name: 'Julien Charpentier', title: 'Partner Manager', photo: 'images/JulienCharpentier.png' },
                { name: 'Bernhard Schwemmer', title: 'Partner Manager (Germany)', photo: 'images/BernhardSchwemmer.jpg' },
                { name: 'Craig Wood', title: 'Partner Manager (UKI)', photo: 'images/ChristieRice.jpg' },
                { name: 'Petros Papakostas', title: 'Partner Technology Strategist (EMEA)', photo: 'images/PetrosPapakostas.png' },
                { name: 'Olivia Hambert', title: 'Partner Technology Strategist (MENA)', photo: 'images/ChristieRice.jpg' },
                { name: 'Martin McBryde', title: 'Partner Technology Strategist (UKI)', photo: 'images/MartinMcBryde.jpg' }
            ],
            'APJ + LATAM': [
                { name: 'Mark Bagley', title: 'Global Partner Leader', photo: 'images/MarkBagley.jpg' },
                { name: 'Michelle Mitchelhill', title: 'Partner Manager (ANZ)', photo: 'images/MichelleMitchellhill.png' },
                { name: 'Rob O\'Leary', title: 'Partner Technology Strategist (ANZ)', photo: 'images/RobOLeary.png' }
            ]
        };
        // EY Regional Leaders
        const eyLeaders = {
            'US + LATAM + Israel': [
                { name: 'Anindo Dutta', title: 'Global Alliance Leader', photo: 'images/AnindoDutta.jpg' }
            ],
            'Canada': [
                { name: 'Anindo Dutta', title: 'Global Alliance Leader', photo: 'images/AnindoDutta.jpg' }
            ],
            'Europe West': [
                { name: 'John Jostes', title: 'Global Alliance Director', photo: 'images/JohnJostes.jpg' },
                { name: 'Maria Saggesse', title: 'Global and EMEIA GBS Solution Leader', photo: 'images/MariaSaggesse.png' },
                { name: 'Dominik Loerts', title: 'Partner for AI & Data and ServiceNow', photo: 'images/DominikLoerts.png' },
                { name: 'Kaspar Schlüer', title: 'Global Solutions & Offerings', photo: 'images/KasparSchluer.png' }
            ],
            'UKI': [
                { name: 'John Jostes', title: 'Global Alliance Director', photo: 'images/JohnJostes.jpg' },
                { name: 'Sarah Conway', title: 'Director', photo: 'images/SarahConway.png' },
                { name: 'Adam Woodhouse', title: 'Tech Transformation Partner (FS)', photo: 'images/AdamWoodhouse.png' },
                { name: 'Chris Fowler', title: 'Tech Consulting Manager', photo: 'images/ChrisFowler.jpg' }
            ],
            'Nordics + CESA': [
                { name: 'John Jostes', title: 'Global Alliance Director', photo: 'images/JohnJostes.jpg' },
                { name: 'Magnus Pedersen', title: 'Tech Strategy and Transformation | Nordic', photo: 'images/MagnusPedersen.png' }
            ],
            'India + Africa': [
                { name: 'Regional Leader', title: 'Alliance Manager', photo: 'images/AnindoDutta.jpg' }
            ],
            'Oceania': [
                { name: 'Regional Leader', title: 'Alliance Manager', photo: 'images/AnindoDutta.jpg' }
            ],
            'MENA': [
                { name: 'Regional Leader', title: 'Alliance Manager', photo: 'images/AnindoDutta.jpg' },
                { name: 'Emad Mustafa', title: 'Partner - MENA Technology Consulting', photo: 'images/EmadMustafa.png' },
                { name: 'Abdalla Amara', title: 'Partner - EY MENA Consulting', photo: 'images/AbdallaAmara.png' }
            ],
            'Greater China': [
                { name: 'Regional Leader', title: 'Alliance Manager', photo: 'images/AnindoDutta.jpg' }
            ],
            'Japan + ASEAN + Korea': [
                { name: 'Regional Leader', title: 'Alliance Manager', photo: 'images/AnindoDutta.jpg' }
            ]
        };
        // Country to region mapping
        const countryToRegions = {
            // North America - US + LATAM + Israel
            'United States': { servicenow: 'North America', ey: 'US + LATAM + Israel' },
            'Mexico': { servicenow: 'North America', ey: 'US + LATAM + Israel' },
            'Israel': { servicenow: 'EMEA', ey: 'US + LATAM + Israel' },
            
            // North America - Canada
            'Canada': { servicenow: 'North America', ey: 'Canada' },
            
            // EMEA - Europe West
            'France': { servicenow: 'EMEA', ey: 'Europe West' },
            'Germany': { servicenow: 'EMEA', ey: 'Europe West' },
            'Spain': { servicenow: 'EMEA', ey: 'Europe West' },
            'Italy': { servicenow: 'EMEA', ey: 'Europe West' },
            'Portugal': { servicenow: 'EMEA', ey: 'Europe West' },
            'Belgium': { servicenow: 'EMEA', ey: 'Europe West' },
            'Netherlands': { servicenow: 'EMEA', ey: 'Europe West' },
            'Luxembourg': { servicenow: 'EMEA', ey: 'Europe West' },
            'Switzerland': { servicenow: 'EMEA', ey: 'Europe West' },
            'Austria': { servicenow: 'EMEA', ey: 'Europe West' },
            
            // EMEA - UKI
            'United Kingdom': { servicenow: 'EMEA', ey: 'UKI' },
            'Ireland': { servicenow: 'EMEA', ey: 'UKI' },
            
            // EMEA - Nordics + CESA
            'Sweden': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Norway': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Finland': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Denmark': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Iceland': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Poland': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Czech Republic': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Slovakia': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Hungary': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Romania': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Bulgaria': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Croatia': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Serbia': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Slovenia': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Bosnia and Herzegovina': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Montenegro': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Albania': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'North Macedonia': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Greece': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Cyprus': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Malta': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Estonia': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Latvia': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            'Lithuania': { servicenow: 'EMEA', ey: 'Nordics + CESA' },
            
            // EMEA - MENA
            'Egypt': { servicenow: 'EMEA', ey: 'MENA' },
            'Saudi Arabia': { servicenow: 'EMEA', ey: 'MENA' },
            'United Arab Emirates': { servicenow: 'EMEA', ey: 'MENA' },
            'Qatar': { servicenow: 'EMEA', ey: 'MENA' },
            'Kuwait': { servicenow: 'EMEA', ey: 'MENA' },
            'Bahrain': { servicenow: 'EMEA', ey: 'MENA' },
            'Oman': { servicenow: 'EMEA', ey: 'MENA' },
            'Jordan': { servicenow: 'EMEA', ey: 'MENA' },
            'Lebanon': { servicenow: 'EMEA', ey: 'MENA' },
            'Iraq': { servicenow: 'EMEA', ey: 'MENA' },
            'Yemen': { servicenow: 'EMEA', ey: 'MENA' },
            'Syria': { servicenow: 'EMEA', ey: 'MENA' },
            'Libya': { servicenow: 'EMEA', ey: 'MENA' },
            'Tunisia': { servicenow: 'EMEA', ey: 'MENA' },
            'Algeria': { servicenow: 'EMEA', ey: 'MENA' },
            'Morocco': { servicenow: 'EMEA', ey: 'MENA' },
            'Sudan': { servicenow: 'EMEA', ey: 'MENA' },
            'Mauritania': { servicenow: 'EMEA', ey: 'MENA' },
            
            // EMEA - India + Africa
            'India': { servicenow: 'APJ + LATAM', ey: 'India + Africa' },
            'South Africa': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Nigeria': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Kenya': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Ghana': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Angola': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Ethiopia': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Tanzania': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Uganda': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Zambia': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Zimbabwe': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Mozambique': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Madagascar': { servicenow: 'EMEA', ey: 'India + Africa' },
            'Mauritius': { servicenow: 'EMEA', ey: 'India + Africa' },
            
            // APJ + LATAM - Oceania
            'Australia': { servicenow: 'APJ + LATAM', ey: 'Oceania' },
            'New Zealand': { servicenow: 'APJ + LATAM', ey: 'Oceania' },
            'Papua New Guinea': { servicenow: 'APJ + LATAM', ey: 'Oceania' },
            'Fiji': { servicenow: 'APJ + LATAM', ey: 'Oceania' },
            
            // APJ + LATAM - Greater China
            'China': { servicenow: 'APJ + LATAM', ey: 'Greater China' },
            'Hong Kong': { servicenow: 'APJ + LATAM', ey: 'Greater China' },
            'Taiwan': { servicenow: 'APJ + LATAM', ey: 'Greater China' },
            'Macau': { servicenow: 'APJ + LATAM', ey: 'Greater China' },
            
            // APJ + LATAM - Japan + ASEAN + Korea
            'Japan': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'South Korea': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Singapore': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Malaysia': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Indonesia': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Thailand': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Vietnam': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Philippines': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Brunei': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Cambodia': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Laos': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            'Myanmar': { servicenow: 'APJ + LATAM', ey: 'Japan + ASEAN + Korea' },
            
            // APJ + LATAM - US + LATAM + Israel (LATAM countries)
            'Brazil': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Argentina': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Colombia': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Peru': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Chile': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Venezuela': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Ecuador': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Bolivia': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Paraguay': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Uruguay': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Guyana': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Suriname': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'French Guiana': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Guatemala': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Honduras': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'El Salvador': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Nicaragua': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Costa Rica': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Panama': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Cuba': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Dominican Republic': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Haiti': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' },
            'Jamaica': { servicenow: 'APJ + LATAM', ey: 'US + LATAM + Israel' }
        };
        // Regional colors
        const regionColors = {
            'North America': '#66C2A5',
            'EMEA': '#FC8D62',
            'APJ + LATAM': '#8DA0CB'
        };
        // Initialize the map
        function initializeMap() {
            const traces = [];
            // Create traces for each country individually
            Object.keys(countryToRegions).forEach(country => {
                const regions = countryToRegions[country];
                const servicenowRegion = regions.servicenow;
                
                traces.push({
                    type: 'choropleth',
                    locations: [country],
                    locationmode: 'country names',
                    z: [1],
                    colorscale: [[0, regionColors[servicenowRegion]], [1, regionColors[servicenowRegion]]],
                    showscale: false,
                    hoverinfo: 'none',
                    marker: { line: { color: 'white', width: 1 } },
                    name: country,
                    customdata: country
                });
            });
            const layout = {
                title: {
                    text: '<b>EY & ServiceNow<br>Alliance Map</b>',
                    x: 0.5,
                    xanchor: 'center',
                    y: 0.95,
                    yanchor: 'top',
                    font: { size: 28, color: '#1C1F21', family: 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif' }
                },
                geo: {
                    showframe: false,
                    showcoastlines: true,
                    projection: { type: 'natural earth' },
                    bgcolor: 'rgba(0,0,0,0)',
                    showland: true,
                    landcolor: 'rgb(255, 255, 255)',
                    coastlinecolor: 'rgb(200, 200, 200)',
                },
                margin: { t: 80, b: 0, l: 0, r: 0 },
                showlegend: false,
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };
            Plotly.newPlot('map', traces, layout, { responsive: true });
            // Add hover event listeners
            const mapDiv = document.getElementById('map');
            let hoverTimeout;
            let currentCard = null;
            
            mapDiv.on('plotly_hover', function(data) {
                if (data.points && data.points.length > 0) {
                    const point = data.points[0];
                    const country = point.data.customdata;
                    clearTimeout(hoverTimeout);
                    showHoverCard(country, data.event.x, data.event.y);
                }
            });
            mapDiv.on('plotly_unhover', function() {
                hoverTimeout = setTimeout(() => {
                    hideHoverCard();
                }, 1000); // Increased delay to 1 second
            });
            // Keep hover card visible when mouse is over it
            const hoverCard = document.getElementById('hoverCard');
            hoverCard.addEventListener('mouseenter', function() {
                clearTimeout(hoverTimeout);
            });
            
            hoverCard.addEventListener('mouseleave', function() {
                hoverTimeout = setTimeout(() => {
                    hideHoverCard();
                }, 300);
            });
        }
        // Show hover card
        function showHoverCard(country, x, y) {
            const card = document.getElementById('hoverCard');
            const regionNameEl = document.getElementById('regionName');
            const servicenowContent = document.getElementById('servicenowContent');
            const eyContent = document.getElementById('eyContent');
            if (!countryToRegions[country]) return;
            const regions = countryToRegions[country];
            const servicenowRegion = regions.servicenow;
            const eyRegion = regions.ey;
            // Set region name to show the country being hovered
            regionNameEl.textContent = country;
            // Set ServiceNow content
            const snData = servicenowLeaders[servicenowRegion];
            let snLeadersHtml = `<div class="region-title-small">${servicenowRegion}</div>`;
            
            snData.forEach(leader => {
                snLeadersHtml += `
                    <div class="leader-info-inline">
                        <img src="${leader.photo}" alt="${leader.name}" class="leader-photo-small" onerror="this.style.display='none'">
                        <span class="leader-text">${leader.name} - ${leader.title}</span>
                    </div>
                `;
            });
            
            servicenowContent.innerHTML = snLeadersHtml;
            // Set EY content
            const eyData = eyLeaders[eyRegion];
            let eyLeadersHtml = `<div class="region-title-small">${eyRegion}</div>`;
            
            eyData.forEach(leader => {
                eyLeadersHtml += `
                    <div class="leader-info-inline">
                        <img src="${leader.photo}" alt="${leader.name}" class="leader-photo-small" onerror="this.style.display='none'">
                        <span class="leader-text">${leader.name} - ${leader.title}</span>
                    </div>
                `;
            });
            
            eyContent.innerHTML = eyLeadersHtml;
            // Show card first to get actual dimensions
            card.style.display = 'block';
            card.style.visibility = 'hidden';
            
            // Get actual card dimensions
            const cardRect = card.getBoundingClientRect();
            const cardWidth = cardRect.width;
            const cardHeight = cardRect.height;
            
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            // Position card anchored from middle-left side
            let cardX = x + 15; // Small offset from cursor
            let cardY = y - cardHeight / 2; // Center vertically with cursor
            // Ensure card stays within viewport
            if (cardX + cardWidth > viewportWidth - 20) {
                cardX = x - cardWidth - 15; // Place to the left of cursor
            }
            if (cardY < 20) {
                cardY = 20;
            }
            if (cardY + cardHeight > viewportHeight - 20) {
                cardY = viewportHeight - cardHeight - 20;
            }
            // Apply final position and make visible
            card.style.left = cardX + 'px';
            card.style.top = cardY + 'px';
            card.style.visibility = 'visible';
            
            // Trigger animation
            setTimeout(() => {
                card.classList.add('visible');
            }, 10);
        }
        // Hide hover card
        function hideHoverCard() {
            const card = document.getElementById('hoverCard');
            card.classList.remove('visible');
            setTimeout(() => {
                card.style.display = 'none';
            }, 300);
        }
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeMap);
    </script>
</body>
</html>
